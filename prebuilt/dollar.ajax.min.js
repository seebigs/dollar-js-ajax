/*!
 * DollarJS Ajax Plugin 1.0.0
 *   Github: https://github.com/seebigs/dollar-js-ajax
 *   Released under the MIT license: https://opensource.org/licenses/MIT
 */
!function(e){function t(e){var t=typeof e;if("object"===t){var o=[];for(key in e)e.hasOwnProperty(key)&&o.push(encodeURIComponent(key)+"="+encodeURIComponent(e[key]));return o.join("&")}return"string"===t?e:""}function o(e,o){var n="object"==typeof o?o:{};"string"==typeof e?n.url=e:n=e,"string"!=typeof n.url&&(n.url=""),n.data=n.data||{},!1===n.cache&&(n.data._=Date.now()),"function"!=typeof n.success&&(n.success=function(){}),"function"!=typeof n.error&&(n.error=function(){}),"function"!=typeof n.complete&&(n.complete=function(){});var r={html:"text/html",json:"application/json",text:"text/plain",xml:"application/xml"},c={method:n.method||"get"};if("object"==typeof n.headers&&(c.headers=n.headers),"get"===c.method){var i=t(n.data);i.length&&(n.url+=("?"===n.url.slice(-1)?"":"?")+i)}else c.body="object"==typeof n.data?JSON.stringify(n.data):n.data;s(n.url,c).then(function(e){if(e&&e.ok){"application/json"===(n.dataType?r[n.dataType]:e.headers.get("Content-Type"))?e.json().then(function(t){n.success(t,e),n.complete("success",e)}):e.text().then(function(t){n.success(t,e),n.complete("success",e)})}else n.error(new Error("Request failed")),n.complete("error",e)}).catch(function(e){n.error(e),n.complete("error",{})})}function n(e,t,o,n){var r={};return"object"==typeof e?r=e:(r.url=e,"object"==typeof t?r.data=t:"function"==typeof t?r.success=t:"string"==typeof t&&(r.dataType=t),"function"==typeof o?r.success=o:"string"==typeof o&&(r.dataType=o),"string"==typeof n&&(r.dataType=n)),r}function r(e,t,r,c){o(n(e,t,r,c))}function c(e,t,r,c){var i=n(e,t,r,c);i.type="POST",o(i)}function i(e,t,r){var c=n(e,t,r);c.dataType="json",o(c)}function a(e,t){}e.Promise=e.Promise||require("promise-polyfill");var s=e.fetch||require("whatwg-fetch");if("undefined"!=typeof module&&module.exports)module.exports={ajax:o,get:r,post:c,getJSON:i,getScript:a};else if("undefined"!=typeof window){var f=window.$;f.ajax=o,f.get=r,f.post=c,f.getJSON=i,f.getScript=a}}("undefined"!=typeof window?window:this);